(this.webpackJsonpbruno=this.webpackJsonpbruno||[]).push([[0],{105:function(e,n,t){e.exports=t(237)},110:function(e,n,t){},237:function(e,n,t){"use strict";t.r(n);var r,a,o=t(102),l=t(0),i=t.n(l),c=t(98),u=t.n(c),s=(t(110),t(2)),p=t(3);function d(){var e=Object(s.a)(["\n  color: brown;\n  font-size: 12px;\n  font-weight: bold;\n  transform: rotate(12deg);\n"]);return d=function(){return e},e}function f(){var e=Object(s.a)(["\n  font-family: 'verdana';\n  font-weight: bold;\n  font-style: italic;\n  font-size: 45px;\n  position: absolute;\n  top: 20px;\n  left: 15px;\n  color: ",";\n  text-shadow: 2px 2px 0px rgba(0, 0, 0, 1);\n"]);return f=function(){return e},e}function x(){var e=Object(s.a)(["\n  height: 90px;\n  width: 50px;\n  border-radius: 50%;\n  background: white;\n  position: absolute;\n  top: 5px;\n  left: 7px;\n  transform: rotate(35deg);\n"]);return x=function(){return e},e}function v(){var e=Object(s.a)(["\n  margin: 2px;\n  display: inline-block;\n  border: 6px solid white;\n  border-radius: 5px;\n  padding: 20px 17px;\n  background: ",";\n  position: relative;\n  color: black;\n  height: 60px;\n  width: 30px;\n  user-select: none;\n  box-shadow: 0px 0px 3px 0px rgba(0, 0, 0, 0.5);\n  ","\n  ","\n  ","\n  ","\n"]);return v=function(){return e},e}!function(e){e.Red="red",e.Green="green",e.Yellow="gold",e.Blue="blue"}(r||(r={})),function(e){e.Zero="0",e.One="1",e.Two="2",e.Three="3",e.Four="4",e.Five="5",e.Six="6",e.Seven="7",e.Eight="8",e.Nine="9",e.Reverse="\u21c4",e.PlusTwo="+2"}(a||(a={}));var y=p.a.div(v(),(function(e){var n=e.isConcealed,t=e.color;return n?"black":t}),(function(e){var n=e.offsetX;return n?"left: ".concat(n,"px;"):""}),(function(e){var n=e.offsetY;return n?"top: ".concat(n,"px;"):""}),(function(e){var n=e.rotation;return n?"transform: rotate(".concat(n,"deg);"):""}),(function(e){return e.onClick?"cursor: pointer;":""})),m=p.a.div(x()),h=p.a.div(f(),(function(e){return e.cardColor})),b=p.a.div(d()),g=function(e){var n=e.color,t=e.value,r=e.isConcealed,a=e.onClick,o=e.rotation,l=e.offsetX,c=e.offsetY;return i.a.createElement(y,{color:n,isConcealed:r,onClick:a,rotation:o,offsetX:l,offsetY:c,value:t},!r&&i.a.createElement(i.a.Fragment,null,i.a.createElement(m,null),i.a.createElement(h,{cardColor:n},t)),r&&i.a.createElement(b,null,"Bruno"))};function O(){var e=Object(s.a)(["\n  display: flex;\n  justify-content: center;\n  transform: rotateZ(0) rotateX(19deg) rotateY(0deg) translateZ(25px) translateX(-10px) translateY(0px);\n  align-items: center;\n  background: grey;\n  height: 60vh;\n  width: 400px;\n  border-radius: 3%;\n"]);return O=function(){return e},e}var P=p.a.div(O()),C=t(103);function E(e){var n=Object.values(e);return n[Math.floor(Math.random()*n.length)]}var w,j=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{color:E(r),value:E(a),isConcealed:e}},T=function(e){var n=Math.floor(360*Math.random()),t=Math.floor(50*Math.random())-25,r=Math.floor(50*Math.random())-25;return Object(C.a)({},e,{rotation:n,offsetX:t,offsetY:r})},k=function(){for(var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=[];n.length<7;)n.push(j(e));return n},R=function(e,n){return e.color===n.color||e.value===n.value},Y=function(e){return e[e.length-1]};function I(){var e=Object(s.a)(["\n  color: brown;\n  font-size: 12px;\n  font-weight: bold;\n  transform: rotate(12deg);\n"]);return I=function(){return e},e}function D(){var e=Object(s.a)(["\n  margin: 2px;\n  display: inline-block;\n  border: 6px solid white;\n  border-radius: 5px;\n  padding: 20px 17px;\n  background: black;\n  position: relative;\n  color: black;\n  height: 60px;\n  width: 30px;\n  user-select: none;\n  position: relative;\n  bottom: 20px;\n  cursor: pointer;\n\n  &:after {\n    background-color: gray;\n    background-image: linear-gradient(hsla(0, 0%, 100%, 0.25), hsla(0, 0%, 0%, 0.25));\n    border-radius: 5px;\n    content: '';\n    height: 28px;\n    left: -6px;\n    position: absolute;\n    top: 68px;\n    width: 76px;\n    transform: translateZ(0px) translateY(30px);\n    z-index: -1;\n  }\n"]);return D=function(){return e},e}!function(e){e[e.PlayerPlaysCard=0]="PlayerPlaysCard",e[e.OpponentPlaysCard=1]="OpponentPlaysCard",e[e.OpponentDrawsCard=2]="OpponentDrawsCard",e[e.PlayerDrawsNewCard=3]="PlayerDrawsNewCard",e[e.SetNextPlayerTurn=4]="SetNextPlayerTurn",e[e.HandleAnyPlayerOutOfCards=5]="HandleAnyPlayerOutOfCards",e[e.HandleCardEffectForPlayer=6]="HandleCardEffectForPlayer",e[e.HandleCardEffectForOpponent=7]="HandleCardEffectForOpponent"}(w||(w={}));var X,F=p.a.div(D()),H=p.a.div(I()),G=function(){var e=Object(l.useContext)(V),n=e.state,t=e.dispatch;return i.a.createElement(F,{onClick:function(){var e=-1===n.playerTurn;!n.player.hasExitedGame&&e&&(t({name:w.PlayerDrawsNewCard}),setTimeout((function(){return t({name:w.SetNextPlayerTurn})}),1e3))}},i.a.createElement(H,null,"Bruno"))};!function(e){e[e.OpponentRight=0]="OpponentRight",e[e.OpponentLeft=1]="OpponentLeft",e[e.OpponentTop=2]="OpponentTop",e[e.Player=3]="Player"}(X||(X={}));var N=function(e,n){var t=Object(l.useRef)();Object(l.useEffect)((function(){t.current=e})),Object(l.useEffect)((function(){var e=setInterval((function(){return t.current&&t.current()}),n);return function(){return clearInterval(e)}}),[n])},Z=function(){var e=Object(l.useContext)(V),n=e.state,t=e.dispatch;N((function(){if(-1!==n.playerTurn){var e=n.playerTurn;if(!n.opponents[e].hasExitedGame){var r=n.opponents[n.playerTurn].cards.findIndex((function(e){return R(e,Y(n.cardPile))}));t({name:w.HandleCardEffectForOpponent,value:{opponentIndex:e}}),t(-1!==r?{name:w.OpponentPlaysCard,value:{cardIndex:r,opponentIndex:e}}:{name:w.OpponentDrawsCard,value:{opponentIndex:e}})}t({name:w.HandleAnyPlayerOutOfCards}),t({name:w.SetNextPlayerTurn})}}),1e3)};function M(){var e=Object(s.a)(["\n  margin: 20px;\n  ",";\n\n  > * {\n    margin: ",";\n  }\n"]);return M=function(){return e},e}var S=p.a.div(M(),(function(e){return function(e){switch(e){case X.Player:return"\n        position: fixed;\n        bottom: 0px;\n        transform: rotateZ(0) rotateX(-22deg) rotateY(0deg) translateZ(20px) translateX(-10px) translateY(0px);";case X.OpponentLeft:return"\n        position: fixed;\n        left: 290px;\n        transform: rotateZ(-350deg) rotateX(-70deg) rotateY(58deg) translateZ(-140px) translateX(-180px) translateY(-90px) skew(0deg, 10deg)";case X.OpponentRight:return"\n        position: fixed;\n        right: 290px;\n        transform: rotateZ(-350deg) rotateX(-70deg) rotateY(-22deg) translateZ(-140px) translateX(238px) translateY(-90px) skew(0deg, -2deg)";default:return""}}(e.tablePosition)}),(function(e){return function(e,n){var t=n?3:8,r=n?-40:-60,a=Math.max(e*-t,r);return"2px 2px 2px ".concat(a,"px")}(e.cardsCount,e.tablePosition===X.Player)}));function A(){var e=Object(s.a)(["\n  position: relative;\n  height: 100px;\n  width: 100px;\n  margin-left: 50px;\n\n  > * {\n    position: absolute;\n  }\n"]);return A=function(){return e},e}var B=p.a.div(A()),z=function(){var e=Object(l.useContext)(V).state;return i.a.createElement(B,null,e.cardPile.map((function(e,n){return i.a.createElement(g,{key:n,color:e.color,value:e.value,isConcealed:!1,rotation:e.rotation,offsetX:e.offsetX,offsetY:e.offsetY})})))},L=function(){var e=Object(l.useContext)(V),n=e.state,t=e.dispatch;Z();return Object(l.useEffect)((function(){-1===n.playerTurn&&t({name:w.HandleCardEffectForPlayer})}),[n.cardPile,n.playerTurn,t]),i.a.createElement(i.a.Fragment,null,n.opponents.map((function(e,n){return i.a.createElement(S,{key:n,tablePosition:e.position,cardsCount:e.cards.length},e.cards.map((function(e,n){return i.a.createElement(g,{key:n,color:e.color,value:e.value,isConcealed:e.isConcealed})})))})),i.a.createElement(P,null,i.a.createElement(G,null),i.a.createElement(z,null)),i.a.createElement(S,{tablePosition:X.Player,cardsCount:n.player.cards.length},n.player.cards.map((function(e,r){return i.a.createElement(g,{key:r,color:e.color,value:e.value,isConcealed:e.isConcealed,onClick:function(){return function(e,r){var a=-1===n.playerTurn;!n.player.hasExitedGame&&a&&R(e,Y(n.cardPile))&&(t({name:w.PlayerPlaysCard,value:{cardIndex:r}}),t({name:w.HandleAnyPlayerOutOfCards}),setTimeout((function(){return t({name:w.SetNextPlayerTurn})}),1e3))}(e,r)}})}))))},J=t(10),q=t(4),K=t.n(q),Q=t(53),U=function(){var e={player:{cards:k(!1),hasExitedGame:!1},opponents:[{name:"Benny",cards:k(),position:X.OpponentLeft,hasExitedGame:!1},{name:"Fanny",cards:k(),position:X.OpponentRight,hasExitedGame:!1}],cardPile:[T(j())],playerTurn:-1,isReversePlayDirection:!1};return Object(l.useReducer)((function(e,n){if(n.name===w.PlayerPlaysCard){var t=n.value.cardIndex,r=T(e.player.cards[t]),o=e.player.cards.filter((function(e,n){return n!==t})),l=Object(Q.flow)(K()(["player","cards"],o),K()(["cardPile"],[].concat(Object(J.a)(e.cardPile),[r])))(e);return r.value===a.Reverse&&(l=K()(["isReversePlayDirection"],!e.isReversePlayDirection)(l)),l}if(n.name===w.OpponentPlaysCard){var i=n.value,c=i.cardIndex,u=i.opponentIndex,s=e.opponents[u],p=T(s.cards[c]),d=s.cards.filter((function(e,n){return n!==c})),f=Object(Q.flow)(K()(["opponents",u,"cards"],d),K()(["cardPile"],[].concat(Object(J.a)(e.cardPile),[p])))(e);return p.value===a.Reverse&&(f=K()(["isReversePlayDirection"],!e.isReversePlayDirection)(f)),f}if(n.name===w.OpponentDrawsCard){var x=n.value.opponentIndex,v=j();return K()(["opponents",x,"cards"],[].concat(Object(J.a)(e.opponents[x].cards),[v]))(e)}if(n.name===w.HandleCardEffectForOpponent){var y=n.value.opponentIndex;if(Y(e.cardPile).value==a.PlusTwo){var m=[j(),j()];return K()(["opponents",y,"cards"],[].concat(Object(J.a)(e.opponents[y].cards),m))(e)}}if(n.name===w.HandleCardEffectForPlayer&&Y(e.cardPile).value==a.PlusTwo){var h=[j(!1),j(!1)];return K()(["player","cards"],[].concat(Object(J.a)(e.player.cards),h))(e)}var b;if(n.name===w.SetNextPlayerTurn)return b=e.isReversePlayDirection?-1!==e.playerTurn?e.playerTurn-1:e.opponents.length-1:e.playerTurn>=e.opponents.length-1?-1:e.playerTurn+1,K()(["playerTurn"],b)(e);if(n.name===w.PlayerDrawsNewCard){var g=j(!1);return K()(["player","cards"],[].concat(Object(J.a)(e.player.cards),[g]))(e)}if(n.name===w.HandleAnyPlayerOutOfCards){var O=e.opponents.findIndex((function(e){return!e.hasExitedGame&&0===e.cards.length}));if(-1!==O)return K()(["opponents",O,"hasExitedGame"],!0)(e);if(0===e.player.cards.length)return console.log("player exited"),K()(["player","hasExitedGame"],!0)(e)}return e}),e)};t.d(n,"GameStateContext",(function(){return V}));var V=i.a.createContext(null);u.a.render(i.a.createElement((function(){var e=U(),n=Object(o.a)(e,2),t=n[0],r=n[1];return i.a.createElement(V.Provider,{value:{state:t,dispatch:r}},i.a.createElement(L,null))}),null),document.getElementById("root"))}},[[105,1,2]]]);
//# sourceMappingURL=main.509e0a6d.chunk.js.map